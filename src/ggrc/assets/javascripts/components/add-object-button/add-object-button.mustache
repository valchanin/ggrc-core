{{!
    Copyright (C) 2017 Google Inc.
    Licensed under http://www.apache.org/licenses/LICENSE-2.0 <see LICENSE file>
}}

{{#is_allowed 'create' singular context=instance.context}}
    <a href="javascript://" class="{{linkclass}}"
        {{#if text}}
        rel="tooltip"
        data-placement="bottom"
        data-original-title="{{text}}"
        {{/if}}
        data-toggle="modal-ajax-form"
        data-modal-reset="reset"
        data-modal-class="modal-wide"
        data-object-singular="{{singular}}"
        data-object-plural="{{plural}}"
        {{^if noparams}} data-object-params='{ "{{instance.class.table_singular}}": {"id" : {{instance.id}}, "type" : "{{instance.class.model_singular}}" }, "context": { "id" : {{firstnonempty instance.context.id "null"}}, "href" : "{{instance.context.href}}", "type" : "{{instance.context.type}}" } }'{{/if}}>
            {{content}}
    </a>
{{/is_allowed}}
